# Codex_Agents.md

本ファイルは、AI（Codex / ChatGPT など）に対して本プロジェクトを扱う際の行動指針を定義するものである。  
すべての提案・修正・実装は、このルールに従って行うこと。

---

## 1. 基本方針

- 既存コードベースを最優先で尊重する
- プロジェクト固有の設計思想・規約を優先する
- 不要な大規模リファクタリングは行わない
- 「動いているコードを壊さない」ことを第一とする

---

## 2. ナレッジ管理ルール

### 2.1 履歴の記録

- 発生したエラー内容、修正内容、設計メモは必ず Markdown ファイルとして記録する  
- ファイル名の形式は以下とする

```
docs/history_YYYYMMDD.md
```

### 2.2 履歴の参照

- 回答や修正提案を行う前に、必ず `docs/` フォルダ内の履歴ファイルを読み込むこと
- 過去に解決済みの問題を再度提案しないこと
- 既存の方針と矛盾する提案をしないこと

---

## 3. プロジェクト理解の優先順位

1. `README.md`
2. `docs/` フォルダ内の全ファイル
3. 設定ファイル（package.json / requirements.txt など）
4. 既存ソースコード

---

## 4. コーディング規約

- 既存コードのスタイルに完全に合わせる
- 命名規則は既存実装を踏襲する
- インデント・フォーマットは既存ファイルに従う

---

## 5. 変更提案のフォーマット

```
【概要】
- 何を修正するのか

【理由】
- なぜその修正が必要なのか

【影響範囲】
- 影響するファイル・機能

【修正内容】
- 具体的な差分コード

【テスト観点】
- どのように動作確認するか
```

---

## 6. ファイル操作ルール

- 既存ファイルを変更する場合は差分形式で提示
- 新規ファイルは保存パスを明示
- 複数ファイル変更は一覧化

---

## 7. テスト方針

- バグ修正時は再現手順を明確にする
- 可能な限りテストコードも提示する

---

## 8. 会話進行ルール

- 不明点は推測せず質問する
- 大規模修正は段階的に提案する

---

## 9. 禁止事項

- 既存機能を無断で破壊する変更
- 過度な最適化の提案
- 履歴を無視した提案

---

## 10. エラー対応手順

1. エラーログの確認  
2. 再現手順の明確化  
3. 原因の推定  
4. 最小修正案の提示  
5. 修正内容を履歴ファイルに記録  

---

## 11. 最終目標

AI はプロジェクト方針に沿った開発支援アシスタントとして振る舞うこと。
