# History 2026-02-09

## Summary
- Generated initial SpamGuard Bot implementation from requirements in `Readme.md`.

## Added
- `bot.py`
- `spamguard/config.py`
- `spamguard/detector.py`
- `spamguard/__init__.py`
- `config.json`
- `requirements.txt`
- `.env.example`
- `tests/test_detector.py`
- `README.md`
- `docs/operation_manual.md`

## Validation
- Unit tests for scoring logic added under `tests/test_detector.py`.
- Runtime validation commands documented in README.

## Update (Guild-specific settings)
- Changed configuration model to support per-guild settings in `config.json`.
- Added backward-compatible migration from old single-config format.
- Updated bot runtime to read/write settings by guild ID.
- Confirmed that `log_channel_id` can be set independently per server.

## Added Tests
- `tests/test_config_store.py`
  - Legacy config migration test
  - Guild-specific value isolation and persistence test

## Update (Discord UI configuration)
- Added guild-specific UI commands under `/spamguard setting`:
  - `rapid`, `duplicate`, `url`, `mention`, `moderation`, `log_channel`
- Existing ignore role/channel operations remain available via Discord role/channel pickers.
- Updated manuals to reflect UI-based configuration flow.

## Fix (py-cord command invoke error)
- Fixed `TypeError: issubclass() arg 1 must be a class` on slash command options.
- Removed `from __future__ import annotations` from `bot.py` to avoid py-cord option type resolution issues with channel/role options.
